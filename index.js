//**started by fetching but still currently working on db.json
// fetch("http://localhost:3000/cities")
// .then((r) => r.json())
// .then((cityData) => {
// cityData.forEach(city => {
//     console.log(city)
// })
// });
// ???????????????????????????????????????????????????????????????????????????? Section Break
feather.replace();
// ! feather icon^
// ???????????????????????????????????????????????????????????????????????????? Section Break
function myFunction() {
  const x = document.getElementById("nav");
  if (x.className === "nav") {
    x.className += " responsive";
  } else {
    x.className = "nav";
  }
}
// ???????????????????????????????????????????????????????????????????????????? Section Break
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// !
// ???????????????????????????????????????????????????????????????????????????? Section Break
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else {
    error.textContent = "Geolocation is not supported by this browser.";
  }
}
// ???????????????????????????????????????????????????????????????????????????? Section Break
// ! note -> showPosition
function showPosition(position) {
  error.textContent =
    // rome-ignore lint/style/useTemplate: <explanation>
    `Latitude:  
    ${position.coords.latitude}
    
    Longitude:  
    ${position.coords.longitude}`;
  fetchWeather(position.coords.latitude, position.coords.longitude);
}
const fetchWeather = (lat, long) => {
  fetch(
    `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${long}&daily=temperature_2m_max,temperature_2m_min,sunrise,sunset,precipitation_sum,windspeed_10m_max&temperature_unit=fahrenheit&windspeed_unit=mph&precipitation_unit=inch&forecast_days=1&timezone=America%2FDenver`
  )
    .then((r) => r.json())
    .then((data) => {
      displayData(data);
      hoverBtn.addEventListener("mouseenter", () => {
        console.log("You hovered over me!");
        const newResults = document.createElement("div");
        newResults.className = "newResults";
        const riseSpan = document.createElement("span");
        const setSpan = document.createElement("span");
        riseSpan.className = "riseDetails";
        riseSpan.textContent = `Sunrise: ${data.daily.sunrise}`;
        setSpan.className = "riseDetails";
        setSpan.textContent = `Sunset: ${data.daily.sunset}`;
        newResults.append(riseSpan, setSpan);
        resultDiv.hidden = true;
        // results.innerHTML = "";
        document.querySelector(".newResults")?.remove();
        // safe navigator operator^^^
        results.append(newResults);
      });
      const byeHoverFun = hoverBtn.addEventListener("mouseleave", (e) => {
        //document.querySelector("moreData");
        const newResults = document.querySelector(".newResults");
        newResults.remove();
        resultDiv.hidden = false;

        console.log("You left!");
      });
    });

  // .then(console.log("hello"));
};
const results = document.querySelector("#results");

//console.log(results);
function displayData(wetData) {
  //debugger;
  //console.log(wetData);
//   results.innerHTML = "";

  results.innerHTML = `<div id="resultDiv">
    On the date ${wetData.daily.time} it is at max temperature ${wetData.daily.temperature_2m_max}
    </div>`;
}
const moreResults = document.querySelector("#moreData");
function hoverData(wetData) {
  moreData.textContent = `I should be hidden for the most part${wetData}`;
}
// ^^^ Why am I not able to see the data? is it because of the wrong syntax?!!!!!!
// ???????????????????????????????????????????????????????????????????????????? Section Break
document.addEventListener("DOMContentLoaded", getLocation);
const submitBtn = document.addEventListener("click", () => {
  const submitClick = document.querySelector("submitBtn");
});
//?  ^ click
search.addEventListener("submit", (e) => {
  e.preventDefault();
  console.log(e.target[0].value);
  fetch(
    "https://maps.googleapis.com/maps/api/geocode/json?address=" +
      e.target[0].value +
      "&key=" +
      "AIzaSyAYE9HJBCt7WvmgwG_KvuPmTkvOAvVy8TY"
  )
    .then((response) => response.json())
    .then((data) => {
      // debugger;
      if (data.results.length === 0){
        alert("Please Use Different Location")
      } else {
        

      const latitude = data.results[0].geometry.location.lat;
      const longitude = data.results[0].geometry.location.lng;
      console.log({ latitude, longitude });
      
      error.textContent =
        // rome-ignore lint/style/useTemplate: <explanation>
        `Latitude:  
    ${latitude}
    
    Longitude:  
    ${longitude}`;
}
e.target[0].value = "";
    })
    
});

// const inputBar = document.querySelector("inputbar");
// e.target.inputbar.value;
const plzWork = document.querySelector("#hoverBtn");
// const leave = document.querySelector("#hoverBtn");
// ???????????????????????????????????????????????????????????????????????????? Section Break
// ???????????????????????????????????????????????????????????????????????????? Section Break
// onmouseover = (e) => {};
